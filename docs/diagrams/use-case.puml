@startuml UseCaseDiagram
title Diagrama de Casos de Uso - Sistema de Gestão Financeira
' Configurações profissionais
skinparam defaultFontColor #000000
skinparam backgroundColor white
skinparam usecase {
    BorderColor #333333
    BackgroundColor #F8F9FA
    FontSize 10
}
skinparam actor {
    BorderColor #333333
    BackgroundColor #E8F4FD
    FontSize 11
    FontStyle bold
}
skinparam rectangle {
    BorderColor #2C3E50
    BackgroundColor #ECF0F1
    FontStyle bold
}

left to right direction

' Atores principais
actor "**Usuário\nFinal**" as User #E8F4FD
actor "**Administrador\nSistema**" as Admin #FFE8E8
actor "**Gateway de\nPagamento**" as PaymentGW #E8FFE8
actor "**Serviço de\nEmail**" as EmailService #FFF8E8

rectangle "**SISTEMA: GESTÃO FINANCEIRA EMPRESARIAL**" {
    
    package "**AUTENTICAÇÃO & USUÁRIOS**" {
        usecase "**UC01**\nRegistrar Conta" as UC01
        usecase "**UC02**\nAutenticar Usuário" as UC02
        usecase "**UC03**\nRecuperar Senha" as UC03
        usecase "**UC04**\nGerenciar Perfil" as UC04
    }
    
    package "**GESTÃO EMPRESARIAL**" {
        usecase "**UC05**\nCadastrar Empresa" as UC05
        usecase "**UC06**\nDefinir Empresa Padrão" as UC06
        usecase "**UC07**\nValidar CNPJ" as UC07
    }
    
    package "**TRANSAÇÕES FINANCEIRAS**" {
        usecase "**UC08**\nCriar Transação" as UC08
        usecase "**UC09**\nCategorizar Transação" as UC09
        usecase "**UC10**\nValidar Limites Plano" as UC10
        usecase "**UC11**\nGerar Relatórios" as UC11
    }
    
    package "**ASSINATURAS & PAGAMENTOS**" {
        usecase "**UC12**\nVisualizar Planos" as UC12
        usecase "**UC13**\nUpgrade de Plano" as UC13
        usecase "**UC14**\nProcessar Pagamento" as UC14
        usecase "**UC15**\nValidar Assinatura" as UC15
    }
    
    package "**ADMINISTRAÇÃO**" {
        usecase "**UC16**\nGerenciar Usuários" as UC16
        usecase "**UC17**\nMonitorar Sistema" as UC17
        usecase "**UC18**\nConfigurar Planos" as UC18
    }
}

' Relacionamentos dos usuários
User --> UC01
User --> UC02
User --> UC03
User --> UC04
User --> UC05
User --> UC06
User --> UC08
User --> UC09
User --> UC11
User --> UC12
User --> UC13

' Relacionamentos do administrador
Admin --> UC16
Admin --> UC17
Admin --> UC18
Admin --> UC07
Admin --> UC15

' Relacionamentos dos sistemas externos
PaymentGW --> UC14
EmailService --> UC03

' Dependências entre casos de uso
UC02 ..> UC01 : <<extend>>
UC08 ..> UC10 : <<include>>
UC13 ..> UC14 : <<include>>
UC05 ..> UC07 : <<include>>

' Notas explicativas
note right of UC10
**REGRA CRÍTICA:**
Verificar limites do plano
antes de permitir transação
end note

note bottom of UC14
**INTEGRAÇÃO:**
Gateway processa pagamento
e notifica via webhook
end note

@enduml
